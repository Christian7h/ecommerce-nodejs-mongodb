---
export const prerender = true;

// Generar rutas estáticas para cada categoría
export async function getStaticPaths() {
  try {
    const response = await fetch("https://nodejs-eshop-api-course-2c70.onrender.com/api/v1/categories");
    if (!response.ok) {
      throw new Error("Error al obtener categorías");
    }
    const categories = await response.json();
    return categories.map((category) => ({
      params: { id: category._id.toString() },
    }));
  } catch (error) {
    console.error("Error en getStaticPaths para categorías:", error);
    return [];
  }
}

import Layout from "../../../layouts/Layout.astro";
import CategoryProducts from "../../../components/store/CategoryProducts.jsx";

// Extraer el ID de la categoría desde la URL
const { id } = Astro.params;
---

<Layout>
  <div class="container mx-auto p-8">
    <h1 class="text-4xl font-bold text-valorant mb-8">Productos de la Categoría</h1>
    <!-- Se pasa el ID de la categoría al componente -->
    <CategoryProducts categoryId={id} />
  </div>
</Layout>
